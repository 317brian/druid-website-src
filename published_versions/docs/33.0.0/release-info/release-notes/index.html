<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-release-info/release-notes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Release notes | Apache® Druid</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://druid.apache.org/img/druid_nav.png"><meta data-rh="true" name="twitter:image" content="https://druid.apache.org/img/druid_nav.png"><meta data-rh="true" property="og:url" content="https://druid.apache.org/docs/33.0.0/release-info/release-notes"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Release notes | Apache® Druid"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://druid.apache.org/docs/33.0.0/release-info/release-notes"><link data-rh="true" rel="alternate" href="https://druid.apache.org/docs/33.0.0/release-info/release-notes" hreflang="en"><link data-rh="true" rel="alternate" href="https://druid.apache.org/docs/33.0.0/release-info/release-notes" hreflang="x-default"><link rel="stylesheet" href="/css/all.css">
<script src="/js/clipboard.min.js"></script><link rel="stylesheet" href="/assets/css/styles.f3140859.css">
<script src="/assets/js/runtime~main.3b6b6bc3.js" defer="defer"></script>
<script src="/assets/js/main.0fd4ceeb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/druid_nav.png" alt="Apache® Druid" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/druid_nav.png" alt="Apache® Druid" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/technology">Technology</a><a class="navbar__item navbar__link" href="/use-cases">Use Cases</a><a class="navbar__item navbar__link" href="/druid-powered">Powered By</a><a class="navbar__item navbar__link" href="/docs/33.0.0/design/">Docs</a><a class="navbar__item navbar__link" href="/community/">Community</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Apache®</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://apachecon.com/?ref=druid.apache.org" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/downloads/">Download</a><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/33.0.0/design/">Introduction to Apache Druid</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/33.0.0/tutorials/">Getting started</a><button aria-label="Expand sidebar category &#x27;Getting started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/33.0.0/design/architecture">Design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/33.0.0/ingestion/">Ingestion</a><button aria-label="Expand sidebar category &#x27;Ingestion&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/33.0.0/data-management/">Data management</a><button aria-label="Expand sidebar category &#x27;Data management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/33.0.0/querying/sql">Querying</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/33.0.0/api-reference/">API reference</a><button aria-label="Expand sidebar category &#x27;API reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/33.0.0/configuration/">Configuration</a><button aria-label="Expand sidebar category &#x27;Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/33.0.0/api-reference/automatic-compaction-api">Operations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/33.0.0/development/overview">Development</a><button aria-label="Expand sidebar category &#x27;Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/33.0.0/release-info/release-notes">Release info</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/33.0.0/release-info/release-notes">Release notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/33.0.0/release-info/upgrade-notes">Upgrade notes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/33.0.0/release-info/migration-guide">Migration guides</a><button aria-label="Expand sidebar category &#x27;Migration guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/33.0.0/misc/papers-and-talks">Papers</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Release info</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Release notes</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Release notes</h1></header><p>Apache Druid 33.0.0 contains over 190 new features, bug fixes, performance enhancements, documentation improvements, and additional test coverage from 44 contributors.</p>
<p>See the <a href="https://github.com/apache/druid/issues?q=is%3Aclosed+milestone%3A%7B%7BMILESTONE%7D%7D+sort%3Aupdated-desc+" target="_blank" rel="noopener noreferrer">complete set of changes</a> for additional details, including bug fixes.</p>
<p>Review the <a href="#upgrade-notes">upgrade notes</a> before you upgrade to Druid 33.0.0.
If you are upgrading across multiple versions, see the <a href="/docs/33.0.0/release-info/upgrade-notes">Upgrade notes</a> page, which lists upgrade notes for the most recent Druid versions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="important-features-changes-and-deprecations">Important features, changes, and deprecations<a href="#important-features-changes-and-deprecations" class="hash-link" aria-label="Direct link to Important features, changes, and deprecations" title="Direct link to Important features, changes, and deprecations">​</a></h2>
<p>This section contains important information about new and existing features.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="increase-segment-load-speed">Increase segment load speed<a href="#increase-segment-load-speed" class="hash-link" aria-label="Direct link to Increase segment load speed" title="Direct link to Increase segment load speed">​</a></h3>
<p>You can now increase the speed at which segments get loaded on a Historical by providing a list of servers for the Coordinator dynamic config <code>turboLoadingNodes</code>. For these servers, the Coordinator ignores <code>druid.coordinator.loadqueuepeon.http.batchSize</code> and uses the value of the respective <code>numLoadingThreads</code> instead. Please note that putting a Historical in turbo-loading mode might affect query performance since more resources would be used by the segment loading threads.</p>
<p><a href="https://github.com/apache/druid/pull/17775" target="_blank" rel="noopener noreferrer">#17775</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="overlord-apis-for-compaction-experimental">Overlord APIs for compaction (experimental)<a href="#overlord-apis-for-compaction-experimental" class="hash-link" aria-label="Direct link to Overlord APIs for compaction (experimental)" title="Direct link to Overlord APIs for compaction (experimental)">​</a></h3>
<p>You can use the following Overlord compaction APIs to manage compaction status and configs. These APIs work seamlessly irrespective of whether compaction supervisors are enabled or not.</p>
<p>For more information, see <a href="#compaction-apis">Compaction APIs</a></p>
<p><a href="https://github.com/apache/druid/pull/17834" target="_blank" rel="noopener noreferrer">#17834</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scheduled-batch-ingestion-experimental">Scheduled batch ingestion (experimental)<a href="#scheduled-batch-ingestion-experimental" class="hash-link" aria-label="Direct link to Scheduled batch ingestion (experimental)" title="Direct link to Scheduled batch ingestion (experimental)">​</a></h3>
<p>You can now schedule batch ingestions with the MSQ task engine by using the scheduled batch supervisor. You can specify the schedule using either the standard Unix cron syntax or Quartz cron syntax by setting the <code>type</code> field to either <code>unix</code> or <code>quartz</code>. Unix also supports macro expressions such as <code>@daily</code> and others.</p>
<p>Submit your supervisor spec to the <code>/druid/v2/sql/task/</code> endpoint.</p>
<p>The following example scheduled batch supervisor spec submits a REPLACE query every 5 minutes:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;scheduled_batch&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;schedulerConfig&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;unix&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;schedule&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;*/5 * * * *&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;spec&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;query&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;REPLACE INTO foo OVERWRITE ALL SELECT * FROM bar PARTITIONED BY DAY&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;suspended&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="https://github.com/apache/druid/pull/17353" target="_blank" rel="noopener noreferrer">#17353</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="improved-s3-upload">Improved S3 upload<a href="#improved-s3-upload" class="hash-link" aria-label="Direct link to Improved S3 upload" title="Direct link to Improved S3 upload">​</a></h3>
<p>Druid can now use AWS S3 Transfer Manager for S3 uploads, which can significantly reduce segment upload time. This feature is on by default and controlled with the following configs in <code>common.runtime.properties</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    druid.storage.transfer.useTransferManager=true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    druid.storage.transfer.minimumUploadPartSize=20971520</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    druid.storage.transfer.multipartUploadThreshold=20971520</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="https://github.com/apache/druid/pull/17674" target="_blank" rel="noopener noreferrer">#17674</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="functional-area-and-related-changes">Functional area and related changes<a href="#functional-area-and-related-changes" class="hash-link" aria-label="Direct link to Functional area and related changes" title="Direct link to Functional area and related changes">​</a></h2>
<p>This section contains detailed release notes separated by areas.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="web-console">Web console<a href="#web-console" class="hash-link" aria-label="Direct link to Web console" title="Direct link to Web console">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="merge-into">MERGE INTO<a href="#merge-into" class="hash-link" aria-label="Direct link to MERGE INTO" title="Direct link to MERGE INTO">​</a></h4>
<p>The MERGE INTO keyword is now highlighted in the web console and the query gets treated as an insert query.</p>
<p><a href="https://github.com/apache/druid/pull/17679" target="_blank" rel="noopener noreferrer">#17679</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-web-console-improvements">Other web console improvements<a href="#other-web-console-improvements" class="hash-link" aria-label="Direct link to Other web console improvements" title="Direct link to Other web console improvements">​</a></h4>
<ul>
<li>Added the ability to multi-select in table filters and added suggestions to the <strong>Status</strong> field for tasks and supervisors as well as service type <a href="https://github.com/apache/druid/pull/17765" target="_blank" rel="noopener noreferrer">#17765</a></li>
<li>The Explore view now supports timezones <a href="https://github.com/apache/druid/pull/17650" target="_blank" rel="noopener noreferrer">#17650</a></li>
<li>Data exported from the web console is now normalized to how Druid exports data. Additionally, you can now export results as Markdown tables <a href="https://github.com/apache/druid/pull/17845" target="_blank" rel="noopener noreferrer">#17845</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ingestion">Ingestion<a href="#ingestion" class="hash-link" aria-label="Direct link to Ingestion" title="Direct link to Ingestion">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sql-based-ingestion">SQL-based ingestion<a href="#sql-based-ingestion" class="hash-link" aria-label="Direct link to SQL-based ingestion" title="Direct link to SQL-based ingestion">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="other-sql-based-ingestion-improvements">Other SQL-based ingestion improvements<a href="#other-sql-based-ingestion-improvements" class="hash-link" aria-label="Direct link to Other SQL-based ingestion improvements" title="Direct link to Other SQL-based ingestion improvements">​</a></h5>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="streaming-ingestion">Streaming ingestion<a href="#streaming-ingestion" class="hash-link" aria-label="Direct link to Streaming ingestion" title="Direct link to Streaming ingestion">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="query-parameter-for-restarts">Query parameter for restarts<a href="#query-parameter-for-restarts" class="hash-link" aria-label="Direct link to Query parameter for restarts" title="Direct link to Query parameter for restarts">​</a></h4>
<p>You can now use an optional query parameter called <code>skipRestartIfUnmodified</code> for the <code>/druid/indexer/v1/supervisor</code> endpoint. You can set <code>skipRestartIfUnmodified=true</code> to not restart the supervisor if the spec is unchanged.</p>
<p>For example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -X POST --header &quot;Content-Type: application/json&quot; -d @supervisor.json localhost:8888/druid/indexer/v1/supervisor?skipRestartIfUnmodified=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="https://github.com/apache/druid/pull/17707" target="_blank" rel="noopener noreferrer">#17707</a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="other-streaming-ingestion-improvements">Other streaming ingestion improvements<a href="#other-streaming-ingestion-improvements" class="hash-link" aria-label="Direct link to Other streaming ingestion improvements" title="Direct link to Other streaming ingestion improvements">​</a></h5>
<ul>
<li>Improved the efficiency of streaming ingestion by fetching active tasks from memory. This reduces the number of calls to the metadata store for active datasource task payloads <a href="https://github.com/apache/druid/pull/16098" target="_blank" rel="noopener noreferrer">#16098</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="querying">Querying<a href="#querying" class="hash-link" aria-label="Direct link to Querying" title="Direct link to Querying">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-the-query-results-api">Improved the query results API<a href="#improved-the-query-results-api" class="hash-link" aria-label="Direct link to Improved the query results API" title="Direct link to Improved the query results API">​</a></h4>
<p>The query results API (<code>GET /druid/v2/sql/statements/{queryId}/results</code>) now supports an optional <code>filename</code> parameter. When provided, the response instructs web browsers to save the results as a file instead of showing them inline (via the <code>Content-Disposition</code> header).</p>
<p><a href="https://github.com/apache/druid/pull/17840" target="_blank" rel="noopener noreferrer">#17840</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="group-by-and-order-by-for-nulls">GROUP BY and ORDER BY for nulls<a href="#group-by-and-order-by-for-nulls" class="hash-link" aria-label="Direct link to GROUP BY and ORDER BY for nulls" title="Direct link to GROUP BY and ORDER BY for nulls">​</a></h4>
<p>SQL queries now support GROUP BY and ORDER BY for null types.</p>
<p><a href="https://github.com/apache/druid/pull/16252" target="_blank" rel="noopener noreferrer">#16252</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-querying-improvements">Other querying improvements<a href="#other-querying-improvements" class="hash-link" aria-label="Direct link to Other querying improvements" title="Direct link to Other querying improvements">​</a></h4>
<ul>
<li>Queries that include functions with a large number of arguments, such as CASE statements, now run faster <a href="https://github.com/apache/druid/pull/17613" target="_blank" rel="noopener noreferrer">#17613</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-management">Cluster management<a href="#cluster-management" class="hash-link" aria-label="Direct link to Cluster management" title="Direct link to Cluster management">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="controller-task-management">Controller task management<a href="#controller-task-management" class="hash-link" aria-label="Direct link to Controller task management" title="Direct link to Controller task management">​</a></h4>
<p>You can now control how many task slots are available for MSQ task engine controller tasks by using the following configs:</p>
<table><thead><tr><th>Property</th><th>Description</th><th>Default value</th></tr></thead><tbody><tr><td><code>druid.indexer.queue.controllerTaskSlotRatio</code></td><td>(Optional) The proportion of available task slots that can be allocated to MSQ task engine controller tasks. This is a floating-point value between 0 and 1</td><td>null</td></tr><tr><td><code>druid.indexer.queue.maxControllerTaskSlots</code></td><td>(Optional) The maximum number of task slots that can be allocated to controller tasks. This is an integer value that defines a hard limit on the number of task slots available for MSQ task engine controller tasks.</td><td>null</td></tr></tbody></table>
<p><a href="https://github.com/apache/druid/pull/16889" target="_blank" rel="noopener noreferrer">#16889</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-cluster-management-improvements">Other cluster management improvements<a href="#other-cluster-management-improvements" class="hash-link" aria-label="Direct link to Other cluster management improvements" title="Direct link to Other cluster management improvements">​</a></h4>
<ul>
<li>Improved logging for permissions issues <a href="https://github.com/apache/druid/pull/17754" target="_blank" rel="noopener noreferrer">#17754</a></li>
<li>Improved query distribution when <code>druid.broker.balancer.type</code> is set to <code>connectionCount</code> <a href="https://github.com/apache/druid/pull/17764" target="_blank" rel="noopener noreferrer">#17764</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-management">Data management<a href="#data-management" class="hash-link" aria-label="Direct link to Data management" title="Direct link to Data management">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compaction-supervisors-experimental">Compaction supervisors (experimental)<a href="#compaction-supervisors-experimental" class="hash-link" aria-label="Direct link to Compaction supervisors (experimental)" title="Direct link to Compaction supervisors (experimental)">​</a></h4>
<p>You now configure compaction supervisors with the following Coordinator compaction config:</p>
<ul>
<li><code>useSupervisors</code> - Enable compaction to run as a supervisor on the Overlord instead of as a Coordinator duty</li>
<li><code>engine</code> - Choose between <code>native</code> and <code>msq</code> to run compaction tasks. The <code>msq</code> setting uses the MSQ task engine and can be used only when <code>useSupervisors</code> is true.</li>
</ul>
<p>Previously, you used runtime properties for the Overlord. Support for these has been removed.</p>
<p><a href="https://github.com/apache/druid/pull/17782" target="_blank" rel="noopener noreferrer">#17782</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="compaction-apis">Compaction APIs<a href="#compaction-apis" class="hash-link" aria-label="Direct link to Compaction APIs" title="Direct link to Compaction APIs">​</a></h4>
<p>You can use the following Overlord APIs to manage compaction:</p>
<table><thead><tr><th>Method</th><th>Path</th><th>Description</th><th>Required Permission</th></tr></thead><tbody><tr><td>GET</td><td><code>/druid/indexer/v1/compaction/config/cluster</code></td><td>Get the cluster-level compaction config</td><td>Read configs</td></tr><tr><td>POST</td><td><code>/druid/indexer/v1/compaction/config/cluster</code></td><td>Update the cluster-level compaction config</td><td>Write configs</td></tr><tr><td>GET</td><td><code>/druid/indexer/v1/compaction/config/datasources</code></td><td>Get the compaction configs for all datasources</td><td>Read datasource</td></tr><tr><td>GET</td><td><code>/druid/indexer/v1/compaction/config/datasources/{dataSource}</code></td><td>Get the compaction config of a single datasource</td><td>Read datasource</td></tr><tr><td>POST</td><td><code>/druid/indexer/v1/compaction/config/datasources/{dataSource}</code></td><td>Update the compaction config of a single datasource</td><td>Write datasource</td></tr><tr><td>GET</td><td><code>/druid/indexer/v1/compaction/config/datasources/{dataSource}/history</code></td><td>Get the compaction config history of a single datasource</td><td>Read datasource</td></tr><tr><td>GET</td><td><code>/druid/indexer/v1/compaction/status/datasources</code></td><td>Get the compaction status of all datasources</td><td>Read datasource</td></tr><tr><td>GET</td><td><code>/druid/indexer/v1/compaction/status/datasources/{dataSource}</code></td><td>Get the compaction status of a single datasource</td><td>Read datasource</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="faster-segment-metadata-operations">Faster segment metadata operations<a href="#faster-segment-metadata-operations" class="hash-link" aria-label="Direct link to Faster segment metadata operations" title="Direct link to Faster segment metadata operations">​</a></h4>
<p>Enable segment metadata caching on the Overlord with the runtime property <code>druid.manager.segments.useCache</code>. This feature is off by default.</p>
<p>You can set the property to the following values:</p>
<ul>
<li><code>never</code>: Cache is disabled (default)</li>
<li><code>always</code>: Reads are always done from the cache. Service start-up will be blocked until the cache has synced with the metadata store at least once. Transactions are blocked until the cache has synced with the metadata store at least once after becoming leader.</li>
<li><code>ifSynced</code>: Reads are done from the cache only if it has already synced with the metadata store. This mode does not block service start-up or transactions unlike the <code>always</code> setting.</li>
</ul>
<p>As part of this change, additional metrics have been introduced. For more information about these metrics, see <a href="#segment-metadata-cache-metrics">Segment metadata cache metrics</a>.</p>
<p><a href="https://github.com/apache/druid/pull/17653" target="_blank" rel="noopener noreferrer">#17653</a> <a href="https://github.com/apache/druid/pull/17824" target="_blank" rel="noopener noreferrer">#17824</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-kill-task-interval">Automatic kill task interval<a href="#automatic-kill-task-interval" class="hash-link" aria-label="Direct link to Automatic kill task interval" title="Direct link to Automatic kill task interval">​</a></h4>
<p>The Coordinator can optionally issue kill tasks for cleaning up unused segments. Starting with this release, individual kill tasks are limited to processing 30 days or fewer worth of segments per task by default. This improves performance of the individual kill tasks.</p>
<p>The previous behavior (no limit on interval per kill task) can be restored by setting <code>druid.coordinator.kill.maxInterval = P0D.</code></p>
<p><a href="https://github.com/apache/druid/pull/17680" target="_blank" rel="noopener noreferrer">#17680</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-data-management-improvements">Other data management improvements<a href="#other-data-management-improvements" class="hash-link" aria-label="Direct link to Other data management improvements" title="Direct link to Other data management improvements">​</a></h4>
<ul>
<li>Metadata queries now return <code>maxIngestedEventTime</code>, which is the timestamp of the latest ingested event for the datasource. For realtime datasources, this may be later than <code>MAX(__time)</code> if <code>queryGranularity</code> is being used. For non-realtime datasources, this is equivalent to <code>MAX(__time)</code> <a href="https://github.com/apache/druid/pull/17686" target="_blank" rel="noopener noreferrer">#17686</a></li>
<li>Metadata kill queries are now more efficient. They consider a maximum end time since the last segment was killed <a href="https://github.com/apache/druid/pull/17770" target="_blank" rel="noopener noreferrer">#17770</a></li>
<li>Newly added segments are loaded more quickly <a href="https://github.com/apache/druid/pull/17732" target="_blank" rel="noopener noreferrer">#17732</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="metrics-and-monitoring">Metrics and monitoring<a href="#metrics-and-monitoring" class="hash-link" aria-label="Direct link to Metrics and monitoring" title="Direct link to Metrics and monitoring">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="custom-histogram-buckets-for-prometheus">Custom Histogram buckets for Prometheus<a href="#custom-histogram-buckets-for-prometheus" class="hash-link" aria-label="Direct link to Custom Histogram buckets for Prometheus" title="Direct link to Custom Histogram buckets for Prometheus">​</a></h4>
<p>You can now configure custom Histogram buckets for <code>timer</code> metrics from the Prometheus emitter using the <code>histogramBuckets</code> parameter.</p>
<p>If no custom buckets are provided, the following default buckets are used: <code>[0.1, 0.25, 0.5, 0.75, 1.0, 2.5, 5.0, 7.5, 10.0, 30.0, 60.0, 120.0, 300.0]</code>. If the user does not specify their own JSON file, a default mapping is used.</p>
<p><a href="https://github.com/apache/druid/pull/17689" target="_blank" rel="noopener noreferrer">#17689</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="segment-metadata-cache-metrics">Segment metadata cache metrics<a href="#segment-metadata-cache-metrics" class="hash-link" aria-label="Direct link to Segment metadata cache metrics" title="Direct link to Segment metadata cache metrics">​</a></h4>
<p>The following metrics have been added:</p>
<p>The following metrics have been introduced as part of the segment metadata cache performance improvement.</p>
<ul>
<li><code>segment/metadataCache/sync/time</code></li>
<li><code>segment/metadataCache/transactions/readOnly</code></li>
<li><code>segment/metadataCache/transactions/writeOnly</code></li>
<li><code>segment/metadataCache/transactions/readWrite</code></li>
</ul>
<p>For more information about the segment metadata cache, see <a href="#faster-segment-metadata-operations">Faster segment metadata operations</a>.</p>
<p><a href="https://github.com/apache/druid/pull/17653" target="_blank" rel="noopener noreferrer">#17653</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="streaming-ingestion-lag-metrics">Streaming ingestion lag metrics<a href="#streaming-ingestion-lag-metrics" class="hash-link" aria-label="Direct link to Streaming ingestion lag metrics" title="Direct link to Streaming ingestion lag metrics">​</a></h4>
<p>The Kafka supervisor now includes additional lag metrics for how many minutes of data Druid is behind:</p>
<p>|Metric|Description|Default value|
|-|-|
|<code>ingest/kafka/updateOffsets/time</code>|Total time (in milliseconds) taken to fetch the latest offsets from Kafka stream and the ingestion tasks.|<code>dataSource</code>, <code>taskId</code>, <code>taskType</code>, <code>groupId</code>, <code>tags</code>|Generally a few seconds at most.|
|<code>ingest/kafka/lag/time</code>|Total lag time in milliseconds between the current message sequence number consumed by the Kafka indexing tasks and latest sequence number in Kafka across all shards. Minimum emission period for this metric is a minute. Enabled only when <code>pusblishLagTime</code> is set to true on supervisor config.|<code>dataSource</code>, <code>stream</code>, <code>tags</code>|Greater than 0, up to max kafka retention period in milliseconds. |
|<code>ingest/kafka/maxLag/time</code>|Max lag time in milliseconds between the current message sequence number consumed by the Kafka indexing tasks and latest sequence number in Kafka across all shards. Minimum emission period for this metric is a minute. Enabled only when <code>pusblishLagTime</code> is set to true on supervisor config.|<code>dataSource</code>, <code>stream</code>, <code>tags</code>|Greater than 0, up to max kafka retention period in milliseconds. |
|<code>ingest/kafka/avgLag/time</code>|Average lag time in milliseconds between the current message sequence number consumed by the Kafka indexing tasks and latest sequence number in Kafka across all shards. Minimum emission period for this metric is a minute. Enabled only when <code>pusblishLagTime</code> is set to true on supervisor config.|<code>dataSource</code>, <code>stream</code>, <code>tags</code>|Greater than 0, up to max kafka retention period in milliseconds. |
|<code>ingest/kinesis/updateOffsets/time</code>|Total time (in milliseconds) taken to fetch the latest offsets from Kafka stream and the ingestion tasks.|<code>dataSource</code>, <code>taskId</code>, <code>taskType</code>, <code>groupId</code>, <code>tags</code>|Generally a few seconds at most.|</p>
<p><a href="https://github.com/apache/druid/pull/17735" target="_blank" rel="noopener noreferrer">#17735</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-metrics-and-monitoring-changes">Other metrics and monitoring changes<a href="#other-metrics-and-monitoring-changes" class="hash-link" aria-label="Direct link to Other metrics and monitoring changes" title="Direct link to Other metrics and monitoring changes">​</a></h4>
<ul>
<li>Added the <code>ingest/processed/bytes</code> metric that tracks the total number of bytes processed during ingestion tasks for JSON-based batch, SQL-based batch, and streaming ingestion tasks <a href="https://github.com/apache/druid/pull/17581" target="_blank" rel="noopener noreferrer">#17581</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="extensions">Extensions<a href="#extensions" class="hash-link" aria-label="Direct link to Extensions" title="Direct link to Extensions">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes">Kubernetes<a href="#kubernetes" class="hash-link" aria-label="Direct link to Kubernetes" title="Direct link to Kubernetes">​</a></h4>
<ul>
<li>You can now ingest payloads larger than 128 KiB when using HDFS as deep storage for Middle Manager-less ingestion <a href="https://github.com/apache/druid/pull/17742" target="_blank" rel="noopener noreferrer">#17742</a></li>
<li>You can now run task pods in a namespace different from the rest of the cluster <a href="https://github.com/apache/druid/pull/17738" target="_blank" rel="noopener noreferrer">#17738</a></li>
<li>You can now name your K8s job names using <code>druid.indexer.runner.k8sTaskPodNamePrefix</code> <a href="https://github.com/apache/druid/pull/17749" target="_blank" rel="noopener noreferrer">#17749</a></li>
<li>The logging level is now set to info. Previously, it was set to debug <a href="https://github.com/apache/druid/pull/17752" target="_blank" rel="noopener noreferrer">#17752</a></li>
<li>Druid now supports lazy loading of pod templates so that any config changes you make are deployed more quickly <a href="https://github.com/apache/druid/pull/17701" target="_blank" rel="noopener noreferrer">#17701</a></li>
<li>Removed startup probe so that peon tasks can start up properly without being killed by Kubernetes <a href="https://github.com/apache/druid/pull/17784" target="_blank" rel="noopener noreferrer">#17784</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="documentation-improvements">Documentation improvements<a href="#documentation-improvements" class="hash-link" aria-label="Direct link to Documentation improvements" title="Direct link to Documentation improvements">​</a></h3>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-notes-and-incompatible-changes">Upgrade notes and incompatible changes<a href="#upgrade-notes-and-incompatible-changes" class="hash-link" aria-label="Direct link to Upgrade notes and incompatible changes" title="Direct link to Upgrade notes and incompatible changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-notes">Upgrade notes<a href="#upgrade-notes" class="hash-link" aria-label="Direct link to Upgrade notes" title="Direct link to Upgrade notes">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="usemaxmemoryestimates"><code>useMaxMemoryEstimates</code><a href="#usemaxmemoryestimates" class="hash-link" aria-label="Direct link to usemaxmemoryestimates" title="Direct link to usemaxmemoryestimates">​</a></h4>
<p><code>useMaxMemoryEstimates</code> is now set to false for MSQ task engine tasks. Additionally, the property has been deprecated and will be removed in a future release. Setting this to false allows for better on-heap memory estimation.</p>
<p><a href="https://github.com/apache/druid/pull/17792" target="_blank" rel="noopener noreferrer">#17792</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-kill-tasks-interval">Automatic kill tasks interval<a href="#automatic-kill-tasks-interval" class="hash-link" aria-label="Direct link to Automatic kill tasks interval" title="Direct link to Automatic kill tasks interval">​</a></h4>
<p>Automatic kill tasks are now limited to 30 days or fewer worth of segments per task.</p>
<p>The previous behavior (no limit on interval per kill task) can be restored by setting <code>druid.coordinator.kill.maxInterval = P0D</code>.</p>
<p><a href="https://github.com/apache/druid/pull/17680" target="_blank" rel="noopener noreferrer">#17680</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-deployments">Kubernetes deployments<a href="#kubernetes-deployments" class="hash-link" aria-label="Direct link to Kubernetes deployments" title="Direct link to Kubernetes deployments">​</a></h4>
<p>By default, the Docker image now uses the canonical hostname to register services in ZooKeeper for internal communication if you&#x27;re running Druid in Kubernetes. Otherwise, it uses the IP address. <a href="https://github.com/apache/druid/pull/17697" target="_blank" rel="noopener noreferrer">#17697</a>.</p>
<p>You can set the environment variable <code>DRUID_SET_HOST_IP</code> to <code>1</code> to restore old behavior.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="updated-configs">Updated configs<a href="#updated-configs" class="hash-link" aria-label="Direct link to Updated configs" title="Direct link to Updated configs">​</a></h4>
<p>Various configs were deprecated in a previous release and have now been removed. The following table lists the removed configs and their replacements:</p>
<table><thead><tr><th>Removed config</th><th>Replacement config</th></tr></thead><tbody><tr><td><code>druid.processing.merge.task.initialYieldNumRows </code></td><td><code>druid.processing.merge.initialYieldNumRows</code></td></tr><tr><td><code>druid.processing.merge.task.targetRunTimeMillis</code></td><td><code>druid.processing.merge.targetRunTimeMillis</code></td></tr><tr><td><code>druid.processing.merge.task.smallBatchNumRows</code></td><td><code>druid.processing.merge.smallBatchNumRows</code></td></tr><tr><td><code>druid.processing.merge.pool.awaitShutdownMillis</code></td><td></td></tr><tr><td><code>druid.processing.merge.awaitShutdownMillis</code></td><td></td></tr><tr><td><code>druid.processing.merge.pool.parallelism</code></td><td><code>druid.processing.merge.parallelism</code></td></tr><tr><td><code>druid.processing.merge.pool.defaultMaxQueryParallelism</code></td><td><code>druid.processing.merge.defaultMaxQueryParallelism</code></td></tr></tbody></table>
<p><a href="https://github.com/apache/druid/pull/17776" target="_blank" rel="noopener noreferrer">#17776</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="segment-metadata-cache-configs">Segment metadata cache configs<a href="#segment-metadata-cache-configs" class="hash-link" aria-label="Direct link to Segment metadata cache configs" title="Direct link to Segment metadata cache configs">​</a></h4>
<p>If you need to downgrade to a version where Druid doesn&#x27;t support the segment metadata cache, you must set the <code>druid.manager.segments.useCache</code> config to false or remove it prior to the upgrade.</p>
<p>This feature is introduced in Druid 33.0.</p>
<p><a href="https://github.com/apache/druid/pull/17653" target="_blank" rel="noopener noreferrer">#17653</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-notes">Developer notes<a href="#developer-notes" class="hash-link" aria-label="Direct link to Developer notes" title="Direct link to Developer notes">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dependency-updates">Dependency updates<a href="#dependency-updates" class="hash-link" aria-label="Direct link to Dependency updates" title="Direct link to Dependency updates">​</a></h4>
<ul>
<li>Added <code>GraalJS</code> to enable Javascript-backed selector strategies <a href="https://github.com/apache/druid/pull/17843" target="_blank" rel="noopener noreferrer">#17843</a></li>
</ul>
<p>The following dependencies have had their versions bumped:</p>
<ul>
<li><code>netty4</code> to version 4.1.118</li>
<li><code>async-http-client</code> to version 3.0.1 <a href="https://github.com/apache/druid/pull/17646" target="_blank" rel="noopener noreferrer">#17646</a></li>
<li><code>jetty</code> to version 9.4.57.v20241219 <a href="https://github.com/apache/druid/pull/17879" target="_blank" rel="noopener noreferrer">#17879</a></li>
<li><code>parquet-avro</code> to version 1.15.1 <a href="https://github.com/apache/druid/pull/17874" target="_blank" rel="noopener noreferrer">#17874</a></li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/33.0.0/development/experimental"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Experimental features</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/33.0.0/release-info/upgrade-notes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Upgrade notes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#important-features-changes-and-deprecations" class="table-of-contents__link toc-highlight">Important features, changes, and deprecations</a><ul><li><a href="#increase-segment-load-speed" class="table-of-contents__link toc-highlight">Increase segment load speed</a></li><li><a href="#overlord-apis-for-compaction-experimental" class="table-of-contents__link toc-highlight">Overlord APIs for compaction (experimental)</a></li><li><a href="#scheduled-batch-ingestion-experimental" class="table-of-contents__link toc-highlight">Scheduled batch ingestion (experimental)</a></li><li><a href="#improved-s3-upload" class="table-of-contents__link toc-highlight">Improved S3 upload</a></li></ul></li><li><a href="#functional-area-and-related-changes" class="table-of-contents__link toc-highlight">Functional area and related changes</a><ul><li><a href="#web-console" class="table-of-contents__link toc-highlight">Web console</a></li><li><a href="#ingestion" class="table-of-contents__link toc-highlight">Ingestion</a></li><li><a href="#querying" class="table-of-contents__link toc-highlight">Querying</a></li><li><a href="#cluster-management" class="table-of-contents__link toc-highlight">Cluster management</a></li><li><a href="#data-management" class="table-of-contents__link toc-highlight">Data management</a></li><li><a href="#metrics-and-monitoring" class="table-of-contents__link toc-highlight">Metrics and monitoring</a></li><li><a href="#extensions" class="table-of-contents__link toc-highlight">Extensions</a></li><li><a href="#documentation-improvements" class="table-of-contents__link toc-highlight">Documentation improvements</a></li></ul></li><li><a href="#upgrade-notes-and-incompatible-changes" class="table-of-contents__link toc-highlight">Upgrade notes and incompatible changes</a><ul><li><a href="#upgrade-notes" class="table-of-contents__link toc-highlight">Upgrade notes</a></li><li><a href="#developer-notes" class="table-of-contents__link toc-highlight">Developer notes</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/favicon.png" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/favicon.png" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="footer__copyright">Copyright © 2025 Apache Software Foundation. Except where otherwise noted, licensed under CC BY-SA 4.0. Apache Druid, Druid, and the Druid logo are either registered trademarks or trademarks of The Apache Software Foundation in the United States and other countries.</div></div></div></footer></div>
</body>
</html>